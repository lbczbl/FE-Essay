### 如何避免重绘或者重排

#### 集中改变样式

我们往往通过改变class的方式来集中改变样式

```javascript
//判断是否是黑色系样式
const theme = isDark ? 'dark' : 'light'
//根据判断来设置不同的class
ele.setAttribute('className', theme)
```

#### 使用DocumentFragment

我们可以通过createDocumentFragment创建一个游离于DOM树之外的节点，然后在此节点上批量操作，最后插入DOM树中，因此只触发一次重排

```javascript
var fragment = document.createDocumentFragment();
for (let i = 0; i < 10; i++) {
  let node = document.createElement("p");
  node.innerHTML = i;
  fragment.appendChild(node)
}
document.body.appendChild(fragment)
```

#### 提升为合成层

将元素提升为合成层有以下优点：

- 合成层的位图，会交由GPU合成，比CPU处理要快

- 当需要repaint时，只需要repaint本身，不会影响到其他的层

- 对于transform和opacity效果，不会触发layout和paint

  提升合成层的最好方式是使用CSS的will-change属性：

  ```css
  #target {
    will-change: transform
  }
  ```

  